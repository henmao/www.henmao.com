---
slug: tips
title: 小技巧
authors: [shanks]
tags: [tips]
---

一些常用的小技巧

<!-- truncate -->

## IP 地址位置查询

> https://www.geoplugin.com/webservices/json

```shell
curl http://www.geoplugin.net/json.gp?ip=xx.xx.xx.xx
```

## 生成随机数

```shell
openssl rand -base64 32
```

## ssh 保持与服务端连接

- `ServerAliveInterval`: 表示每隔多少秒发送一次心跳包（设置为 60 秒）。
- `ServerAliveCountMax`: 指定在服务器无响应的情况下尝试发送多少次心跳包（3 次后断开）。

`vim ~/.ssh/config`

```shell
Host *
  ServerAliveInterval 60
  ServerAliveCountMax 3
```

## mongodb 创建用户

```shell
use dbname  # 进入数据库

# 创建用户
db.createUser({
    user: 'aa',
    pwd: 'aaaaaa',
    roles: ['readWrite', 'dbAdmin', 'userAdmin']
})
```

## mongodb 插入管理员

> 123456 => $2b$10$z4WSs5Ox55mPV8BSZaC8p.rqsur9sKe2/kmWhKKuAesLezqOZDz9S

```shell
db.users.insertOne({
    username: 'aa',
    nickname: 'aa',
    password: '$2b$10$z4WSs5Ox55mPV8BS',
    createdAt: new Date(),
    updatedAt: new Date()
})
```

## 配置 docker 源

> 配置腾讯内部源

`vim /etc/docker/daemon.json`

```json
{
  "registry-mirrors": ["https://mirror.ccs.tencentyun.com"]
}
```

重启

```shell
sudo systemctl restart docker
```

查看源

```shell
sudo docker info
```
